<HTML
><HEAD
><TITLE
>Archive_Tar</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="Filesystem related"
HREF="packages.file.html"><LINK
REL="PREVIOUS"
TITLE="File_SearchReplace"
HREF="packages.file.searchreplace.html"><LINK
REL="NEXT"
TITLE="Logging"
HREF="packages.log.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="packages.file.searchreplace.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="packages.log.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="packages.file.archive-tar"
>Archive_Tar</A
></H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN4175"
></A
>Archive_Tar&nbsp;--&nbsp;managing tar archives</DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.tar"
></A
><H2
>Archive_Tar::Archive_Tar()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4180"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void <B
CLASS="function"
>Archive_Tar</B
></CODE
> (string $tarname [, boolean
      $compress])</CODE
></P
><P
></P
></DIV
><P
>&#13;    The constructor declare a new <B
CLASS="classname"
>Archive_Tar</B
>
    object, identifying it by the name of the tar file.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$tarname</I
></TT
> - the name of the tar archive to work with
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$compress</I
></TT
> - if <TT
CLASS="parameter"
><I
>true</I
></TT
>, indicates that the archive is
       gezip(ped). Default is <TT
CLASS="parameter"
><I
>false</I
></TT
>.
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.create"
></A
><H2
>Archive_Tar::create()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4203"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void <B
CLASS="function"
>create</B
></CODE
> (array $filelist)</CODE
></P
><P
></P
></DIV
><P
>&#13;     This method creates the archive file and add the listed files or
     directories.
     If a file with the same tarname exist and is writable, it is replaced
     by the new tar (it is not an 'add' but a 'create'). If a file exists and is write protected or is a folder,
      the method return <TT
CLASS="parameter"
><I
>false</I
></TT
> and a PEAR error text.
     The list can be an array of string, each string
     representing a filename or a directory name with their path if
     needed. It can also be a single string with names separated by a
     single blank.
     For each directory added in the archive, the files and
     sub-directories are also added.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filelist</I
></TT
> - an array of filenames and directory
       names, or a single string with names separated by a single blank space.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success, <TT
CLASS="parameter"
><I
>false</I
></TT
> and a PEAR error text on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4223"
></A
><P
><B
>Example 1. create()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tar");
$tar_object-&#62;setErrorHandling(PEAR_ERROR_PRINT);  // Optional error handling
$v_list[0]="file.txt";
$v_list[1]="data/";                              // Optional '/' at the end
$v_list[2]="file.log";
$tar_object-&#62;create($v_list);</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;    In this example a not compressed Tar archive is created. The files 'file.txt' and 'file.log' are
    added, all the directory 'data' is added.
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4227"
></A
><P
><B
>Example 2. create()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tgz", true);
$tar_object-&#62;setErrorHandling(PEAR_ERROR_PRINT);  // Optional error handling
$tar_object-&#62;create("file.txt data/ file.log");</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;    In this example a compressed Tar archive is created. The same files and directory are added,
    but without using an array.
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.add"
></A
><H2
>Archive_Tar::add()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4233"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>add</B
></CODE
> (array $filelist)</CODE
></P
><P
></P
></DIV
><P
>&#13;    This method add the files / directories that are listed in <TT
CLASS="parameter"
><I
>filelist</I
></TT
> in
    the existing archive. If the archive does not exist it is created.
    The files and directories listed are only added at the end of the archive,
    even if a file with the same name is already archived.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filelist</I
></TT
> - An array of filenames and directory
        names, or a single string with names separated by a single blank space.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success, <TT
CLASS="parameter"
><I
>false</I
></TT
> and a PEAR error text on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4253"
></A
><P
><B
>Example 3. add()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tgz", true);
$v_list[0]="dev/file.txt";
$v_list[1]="dev/data/";      // Optional '/' at the end
$v_list[2]="log/file.log";
$tar_object-&#62;add($v_list);</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.extract"
></A
><H2
>Archive_Tar::extract()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4258"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>extract</B
></CODE
> (array $path)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Extracts the files from the archive into the given <TT
CLASS="parameter"
><I
>path</I
></TT
>.
   </P
><P
>&#13;    While extracting a file : If the file already exists it is replaced
    without looking for last modification date.
    If the file already exists and is write
    protected, the extraction is aborted.
    If a directory with the same name already
    exists, the extraction is aborted.
   </P
><P
>&#13;    While extracting a directory, if a file with the same name already
    exists, the extraction is aborted.
    While extracting a file/directory if the destination directory exist
    and is write protected, or does not exist but can not be created,
    the extraction is aborted.
    If after extraction an extracted file does not show the correct
    stored file size, the extraction is aborted.
   </P
><P
>&#13;    When the extraction is aborted, a PEAR error text is set and <TT
CLASS="parameter"
><I
>false</I
></TT
>
    is returned. However the result can be a partial extraction that may
    need to be manually cleaned.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$path</I
></TT
> - the path to extract
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success, <TT
CLASS="parameter"
><I
>false</I
></TT
> and a PEAR error text on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4282"
></A
><P
><B
>Example 4. extract()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar = new Archive_Tar('archive.tgz', true);
$result = $tar-&#62;extract('destination_folder');</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.listcontent"
></A
><H2
>Archive_Tar::listContent()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4287"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>array <B
CLASS="function"
>listContent</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;    Lists the files and the directories of the archive.
   </P
><P
>&#13;    The result is an array, each entry representing a file or folder.
  The array is not sorted, so the index shows the position of the file/dir in the
  archive.
   </P
><P
>&#13;  Each entry has the following informations :
    <P
></P
><UL
><LI
><P
>&#13;       $file[filename] : Name and path of the file/dir.
      </P
></LI
><LI
><P
>&#13;       $file[mode] : File permissions (result of fileperms())
      </P
></LI
><LI
><P
>&#13;       $file[uid] : user id
      </P
></LI
><LI
><P
>&#13;       $file[gid] : group id
      </P
></LI
><LI
><P
>&#13;       $file[size] : filesize
      </P
></LI
><LI
><P
>&#13;       $file[mtime] : Last modification time (result of filemtime())
      </P
></LI
><LI
><P
>&#13;       $file[typeflag] : "" for file, "5" for directory
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>array</I
></TT
> - a list of the files/directories properties
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4315"
></A
><P
><B
>Example 5. listContent()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tar");
if (($v_list  =  $tar_object-&#62;listContent()) != 0)
    for ($i=0; $i&#60;sizeof($v_list); $i++) {
        echo "Filename :'".$v_list[$i][filename]."'&#60;br&#62;";
        echo " .size :'".$v_list[$i][size]."'&#60;br&#62;";
        echo " .mtime :'".$v_list[$i][mtime]."' (".
             date("l dS of F Y h:i:s A", $v_list[$i][mtime]).")&#60;br&#62;";
        echo " .mode :'".$v_list[$i][mode]."'&#60;br&#62;";
        echo " .uid :'".$v_list[$i][uid]."'&#60;br&#62;";
        echo " .gid :'".$v_list[$i][gid]."'&#60;br&#62;";
        echo " .typeflag :'".$v_list[$i][typeflag]."'&#60;br&#62;";
    }</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.addmodify"
></A
><H2
>Archive_Tar::addModify()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4320"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>addModify</B
></CODE
> (array $filelist, string
      $add_dir [, string
      $remove_dir])</CODE
></P
><P
></P
></DIV
><P
>&#13;    This method add the files or directories listed in <TT
CLASS="parameter"
><I
>&#13;    filelist</I
></TT
> at the end of the existing archive.
   </P
><P
>&#13;    If the archive does not exists it is created.
    If a file or directory is already in the archive it will only be added
    at the end of the archive. There is no update of the existing archived
    file or directory. However while extracting the archive, the last file will
    replace the first one. This results in a none optimization of the
    archive size. If a file or directory does not exists, it is ignored.
    If the resulting filename or directory name (after the add/remove option or
    not) string is greater than 99 char, the file or directory is
    ignored.
   </P
><P
>&#13;    The path indicated in <TT
CLASS="parameter"
><I
>remove_dir</I
></TT
> will be removed from
    the memorized path of each file / directory listed when this path
    exists. By default nothing is removed (empty path '')
    The path indicated in <TT
CLASS="parameter"
><I
>add_dir</I
></TT
> will be added at the
    beginning of
    the memorized path of each file / directory listed. However it can
    be set to empty ''. The adding of a path is done after the removing
    of path.
    The path add/remove ability enables the user to prepare an archive
    for extraction in a different path than the original path.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filelist</I
></TT
> - an array of filenames and directory
       names, or a single string with names separated by a single blank space.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$add_dir</I
></TT
> - a string which contains a path to be
       added to the memorized path of each element in the list.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$remove_dir</I
></TT
> - a string which contains a path to be
       removed from the memorized path of each element in the list, when
       relevant. Default is an empty string.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success, <TT
CLASS="parameter"
><I
>false</I
></TT
> on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4355"
></A
><P
><B
>Example 6. addModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tar");
$v_list[0]="dev/file.txt";
$v_list[1]="dev/data/";
$v_list[2]="log/file.log";
$tar_object-&#62;addModify($v_list, "install");
// files are stored in the archive as :
//   install/file.txt
//   install/data
//   install/data/file1.txt
//   install/data/... all the files and sub-dirs of data/
//   install/file.log</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4358"
></A
><P
><B
>Example 7. addModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tar");
$v_list[0]="dev/file.txt";
$v_list[1]="dev/data/";
$v_list[2]="log/file.log";
$tar_object-&#62;addModify($v_list, "install", "dev");
// files are stored in the archive as :
//   install/file.txt
//   install/data
//   install/data/file1.txt
//   install/data/...         all the files and sub-dirs of data/
//   install/log/file.log</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4361"
></A
><P
><B
>Example 8. addModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tar");
$v_list[0]="d:\\dev\\file.txt";
$v_list[1]="d:\\dev\\data\\";
$v_list[2]="d:\\log\\file.log";
$tar_object-&#62;addModify($v_list, "install/temp", "d:\\dev");
// files are stored in the archive as :
//   install/temp/file.txt
//   install/temp/data
//   install/temp/data/file1.txt
//   install/temp/data/...         all the files and sub-dirs of data/
//   install/temp/log/file.log</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;    Under windows system, windows path format can be used. However if the files are
    using windows path, the $remove_dir parameter must be in windows path format.
    The $add_dir parameter can be in windows or unix path format.
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.createmodify"
></A
><H2
>Archive_Tar::createModify()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4367"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>createModify</B
></CODE
> (array $filelist, string
      $add_dir [, string
      $remove_dir])</CODE
></P
><P
></P
></DIV
><P
>&#13;    This method creates the archive file and add the listed files or
    directories.
   </P
><P
>&#13;    If the file already exists and is writable, it is replaced
    by the new tar. It is a create and not an add. If the file exists and is
    read-only or is a directory it is not replaced.
    The path add/remove ability enables the user to prepare an archive
    for extraction in a different path than the origin files are (see Archive_Tar::addModify()).
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filelist</I
></TT
> - an array of filenames and directory
       names, or a single string with names separated by a single blank space.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$add_dir</I
></TT
> - a string which contains a path to be
       added to the memorized path of each element in the list.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$remove_dir</I
></TT
> - a string which contains a path to be
       removed from the memorized path of each element in the list, when
       relevant. Default is an empty string.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success,<TT
CLASS="parameter"
><I
>false</I
></TT
> on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4398"
></A
><P
><B
>Example 9. createModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tgz", true);
$tar_object-&#62;setErrorHandling(PEAR_ERROR_PRINT);
$v_list[0]="dev/file.txt";
$v_list[1]="dev/data/";
$v_list[2]="log/file.log";
$tar_object-&#62;createModify($v_list, "install", "dev");
// files are stored in the archive as :
//   install/file.txt
//   install/data
//   install/data/file1.txt
//   install/data/... all the files and sub-dirs of data/
//   install/log/file.log</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4401"
></A
><P
><B
>Example 10. createModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>$tar_object = new Archive_Tar("tarname.tgz", true);
$tar_object-&#62;setErrorHandling(PEAR_ERROR_PRINT);
$v_list[0]="c:\\dev\\file.txt";
$v_list[1]="c:\\dev\\data\\";
$v_list[2]="c:\\log\\file.log";
$tar_object-&#62;createModify($v_list, "install/temp", "c:\\dev");
// files are stored in the archive as :
//   install/temp/file.txt
//   install/temp/data
//   install/temp/data/file1.txt
//   install/temp/data/... all the files and sub-dirs of data/
//   install/temp/log/file.log</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.extractmodify"
></A
><H2
>Archive_Tar::extractModify()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4406"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>extractModify</B
></CODE
> (string $path, string
      $remove_path)</CODE
></P
><P
></P
></DIV
><P
>&#13;    This method extract all the content of the archive in the directory
    indicated by <TT
CLASS="parameter"
><I
>path</I
></TT
>. When relevant the memorized
    path of the files or directories can be modified by removing the
    <TT
CLASS="parameter"
><I
>remove_path</I
></TT
> path at the beginning of the
    file or directory path.
   </P
><P
>&#13;    While extracting a file : If the file already exists it is replaced
    without looking for last modification date.
    If the file already exists and is write
    protected, the extraction is aborted.
    If a directory with the same name already
    exists, the extraction is aborted.
   </P
><P
>&#13;    While extracting a directory, if a file with the same name already
    exists, the extraction is aborted.
    While extracting a file/directory if the destination directory exist
    and is write protected, or does not exist but can not be created,
    the extraction is aborted.
    If after extraction an extracted file does not show the correct
    stored file size, the extraction is aborted.
   </P
><P
>&#13;    When the extraction is aborted, a PEAR error text is set and <TT
CLASS="parameter"
><I
>false</I
></TT
>
    is returned. However the result can be a partial extraction that may
    need to be manually cleaned.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$path</I
></TT
> - the path of the directory where the
       files and/or directories need to by extracted.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$remove_path</I
></TT
> - part of the memorized path that can
       be removed if present at the beginning of the files or directories path.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success,<TT
CLASS="parameter"
><I
>false</I
></TT
> on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4436"
></A
><P
><B
>Example 11. extractModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>// tarname.tar with files :
//   dev/data/file.txt
//   dev/data/log.txt
//   readme.txt

$tar_object = new Archive_Tar("tarname.tar");
$tar_object-&#62;extractModify("install", "dev");

// Files will be extracted there :
//   install/data/file.txt
//   install/data/log.txt
//   install/readme.txt</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4439"
></A
><P
><B
>Example 12. extractModify()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>// tarname.tar with files :
//   dev/data/file.txt
//   dev/data/log.txt
//   readme.txt

$tar_object = new Archive_Tar("tarname.tar");
$tar_object-&#62;extractModify("d:\\install\\temp", "dev");

// Files will be extracted there :
//   d:\\install\\temp\\data\\file.txt
//   d:\\install\\temp\\data\\log.txt
//   d:\\install\\temp\\readme.txt</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><P
>&#13;    Under a windows system, the windows path format 'd:\\path\\dir' can be used
    in the $add_dir parameter. It can never be used in the $remove_dir parameter
    which must match the stored path inside the archive.
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.archive-tar.extractlist"
></A
><H2
>Archive_Tar::extractList()</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN4445"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean <B
CLASS="function"
>extractList</B
></CODE
> (array $filelist, string
      $path [, string
      $remove_path])</CODE
></P
><P
></P
></DIV
><P
>&#13;    This method extract from the archive only the files indicated in the
    <TT
CLASS="parameter"
><I
>filelist</I
></TT
>. These files are extracted in the current
    directory or in the directory indicated by the optional <TT
CLASS="parameter"
><I
>&#13;    path</I
></TT
> parameter.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filelist</I
></TT
> - an array of filenames and directory
       names, or a single string with names separated by a single blank space.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$path</I
></TT
> - the path of the directory where the
       files and/or directory need to by extracted.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$remove_path</I
></TT
> - part of the memorized path that can
       be removed if present at the beginning of the files or directories path.
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - <TT
CLASS="parameter"
><I
>true</I
></TT
> on
       success,<TT
CLASS="parameter"
><I
>false</I
></TT
> on error
      </P
></LI
></UL
>
   </P
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN4477"
></A
><P
><B
>Example 13. extractList()</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>// tarname.tar with files :
//   dev/data/file.txt
//   dev/data/log.txt
//   readme.txt

$tar_object = new Archive_Tar("tarname.tar");
$tar_object-&#62;extractList("dev/data/file.txt readme.txt", "install",
                         "dev");

// Files will be extracted there :
//   install/data/file.txt
//   install/readme.txt</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="packages.file.searchreplace.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="packages.log.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><B
CLASS="classname"
>File_SearchReplace</B
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="packages.file.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Logging</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>