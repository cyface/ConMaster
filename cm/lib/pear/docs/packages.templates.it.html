<HTML
><HEAD
><TITLE
>IntegratedTemplate</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="HTML Templates"
HREF="packages.templates.html"><LINK
REL="PREVIOUS"
TITLE="HTML Templates"
HREF="packages.templates.html"><LINK
REL="NEXT"
TITLE="IntegratedTemplateExtension"
HREF="packages.templates.itx.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="packages.templates.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="packages.templates.itx.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="packages.templates.it"
><B
CLASS="classname"
>IntegratedTemplate</B
></A
></H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN5606"
></A
><B
CLASS="classname"
>IntegratedTemplate</B
>&nbsp;--&nbsp;
    Light-weight template system
   </DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.placeholder"
></A
><H2
>Placeholder</H2
><P
>&#13;    The format of placeholder is
    <TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>{[0-9A-Za-z_-]+}</PRE
></TD
></TR
></TABLE
>
    This means, the name of the placeholder can consist of upper- and lowercase 
    letters, underscores and hypens. The name must be placed between curly 
    brackets without any spaces. Valid names are i.e.:    
     <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
>{Placeholder}</TD
></TR
><TR
><TD
>{place2_holder}</TD
></TR
><TR
><TD
>{PLACEHOLDER1}</TD
></TR
><TR
><TD
>{Place-Holder}</TD
></TR
></TBODY
></TABLE
><P
></P
>
    Non-valid names are i.e.
     <P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
>{ Placeholder 3 } (spaces)</TD
></TR
><TR
><TD
>{place*holder} (char isn't permitted)</TD
></TR
></TBODY
></TABLE
><P
></P
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.block"
></A
><H2
>Blocks</H2
><P
>&#13;    The format of a block is
    <TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;!-- BEGIN [0-9A-Za-z_-]+ --&#62;
... block content ...
&#60;!-- END [0-9A-Za-z_-]+ --&#62;</PRE
></TD
></TR
></TABLE
>
    The rules for the block name are the same like for placeholders. 
    In contrast to placeholders the spaces in the block markup are 
    required.
   </P
><P
>&#13;    The nesting of blocks is permitted, but be careful while 
    parsing. You have to set and parse the deepest inner block first
    and then set and parse from inner to outer.
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.example"
></A
><H2
>Usage Example</H2
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN5629"
></A
><P
><B
>Example 1. The template</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;html&#62; 
 &#60;table border&#62; 
&#60;!-- BEGIN row --&#62; 
  &#60;tr&#62;
&#60;!-- BEGIN cell --&#62;  
   &#60;td&#62;
    {DATA}
   &#60;/td&#62;
&#60;!-- END cell --&#62;  
  &#60;/tr&#62;
&#60;!-- END row --&#62; 
 &#60;/table&#62; 
&#60;/html&#62;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN5632"
></A
><P
><B
>Example 2. The script</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="php"
>&#60;?php 
  require_once "HTML/IT.php"; 

  $data = array 
  ( 
    "0" =&#62; array("Stig", "Bakken"), 
    "1" =&#62; array("Martin", "Jansen"), 
    "2" =&#62; array("Alexander", "Merz") 
  ); 

  $tpl = new IntegratedTemplate("./templates"); 

  $tpl-&#62;loadTemplatefile("main.tpl.htm", true, true); 

  foreach($data as $name) {
    foreach($name as $cell) {
        // Assign data to the inner block 
        $tpl-&#62;setCurrentBlock("cell") ;
        $tpl-&#62;setVariable("DATA", $cell) ;
        $tpl-&#62;parseCurrentBlock("cell") ;
    }
    // Assign data and the inner block to the 
    // outer block
    $tpl-&#62;setCurrentBlock("row") ;
    $tpl-&#62;parseCurrentBlock("row") ;    
  }
  // print the output
  $tpl-&#62;show(); 

?&#62;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
CLASS="EXAMPLE"
><TR
><TD
><DIV
CLASS="example"
><A
NAME="AEN5635"
></A
><P
><B
>Example 3. The output</B
></P
><TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>&#60;html&#62; 
 &#60;table border&#62; 
  &#60;tr&#62;
   &#60;td&#62;
    Stig
   &#60;/td&#62;
   &#60;td&#62;
    Bakken
   &#60;/td&#62;
  &#60;/tr&#62;
  &#60;tr&#62;
   &#60;td&#62;
    Martin
   &#60;/td&#62;
   &#60;td&#62;
    Jansen
   &#60;/td&#62;
  &#60;/tr&#62;  
  &#60;tr&#62;
   &#60;td&#62;
    Alexander
   &#60;/td&#62;
   &#60;td&#62;
    Merz
   &#60;/td&#62;
  &#60;/tr&#62;  
 &#60;/table&#62; 
&#60;/html&#62;</PRE
></TD
></TR
></TABLE
></DIV
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.integratedtemplate"
></A
><H2
>IntegratedTemplate::IntegratedTemplate</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5640"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::IntegratedTemplate</B
></CODE
> ([string $root])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Builds some complex regular expressions and optinally sets the file 
    root directory. Make sure that you call this constructor if you derive 
    your templateclass from this one.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$root</I
></TT
> - root directory, prefix for all 
       filenames given to the object. 
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.get"
></A
><H2
>IntegratedTemplate::get</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5655"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>string
     <B
CLASS="function"
>IntegratedTemplate::get</B
></CODE
> ([string $block])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Returns a block with all replacements done.   
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$block</I
></TT
> - block to return, when not set
       the complete template will returned.
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.parse"
></A
><H2
>IntegratedTemplate::parse</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5670"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::parse</B
></CODE
> ([string $block [, boolean $flag_recursion]])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Parses the given block.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$block</I
></TT
> - block to parse, when not set
       the complete template will be parsed.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$flag_recursion</I
></TT
> - can be ignored
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.parsecurrentblock"
></A
><H2
>IntegratedTemplate::parseCurrentBlock</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5691"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::parseCurrentBlock</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;    Parses the current block
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.setvariable"
></A
><H2
>IntegratedTemplate::setVariable</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5699"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::setVariable</B
></CODE
> (mixed $placeholder [, string $variable])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Sets a variable value. The function can be used eighter like 
    setVariable( "varname", "value") or with one array 
    $variables["varname"] = "value" given setVariable($variables).
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$placeholder</I
></TT
> - Name of the placeholder to
       substitute or a array with the placeholder as key and the data to
       assign as value.
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$variable</I
></TT
> - when $placeholder isn't a array, the
       value to assign to the placeholder.
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.setCurrentBlock"
></A
><H2
>IntegratedTemplate::parse</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5719"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean
     <B
CLASS="function"
>IntegratedTemplate::setCurrentBlock</B
></CODE
> ([string $block])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Sets the name of the current block, that is the block where variables 
    are added.     
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$block</I
></TT
> - block to set, when not given
       the complete template is set (shows on the placeholders outside
       of all block).
      </P
></LI
></UL
> 
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>Boolean</I
></TT
> - false on failure, otherwise true
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.touchblock"
></A
><H2
>IntegratedTemplate::touchBlock</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5739"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean
     <B
CLASS="function"
>IntegratedTemplate::touchBlock</B
></CODE
> (string $block)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Preserves an empty block even if removeEmptyBlocks is true
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$block</I
></TT
> - block to preserve
      </P
></LI
></UL
> 
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>Boolean</I
></TT
> - false on false, otherwise true 
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.init"
></A
><H2
>IntegratedTemplate::init</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5758"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::init</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;    Clears all datafields of the object and rebuilds the internal
    blocklist. LoadTemplatefile() and setTemplate() automatically 
    call this function when a new template is given. Don't use this
    function unless you know what you're doing.    
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.free"
></A
><H2
>IntegratedTemplate::free</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5766"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::free</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;    Clears all datafields of the object. Don't use this function 
    unless you know what you're doing.     
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.setTemplate"
></A
><H2
>IntegratedTemplate::setTemplate</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5774"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::setTemplate</B
></CODE
> (string $template)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Sets the template. You can eighter load a template file from disk 
    with LoadTemplatefile() or set the template manually using this 
    function. 
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$template</I
></TT
> - content
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.loadTemplatefile"
></A
><H2
>IntegratedTemplate::loadTemplatefile</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5788"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean
     <B
CLASS="function"
>IntegratedTemplate::loadTemplatefile</B
></CODE
> (string $filename [, boolean $removeUnknownVariables [, boolean $removeEmptyBlocks]])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Reads a template file from the disk. 
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$filename</I
></TT
> - name of the template file
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$removeUnknownVariables</I
></TT
> - when true
       not assigned placeholders will be deleted
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$removeEmptyBlocks</I
></TT
> - when true
       unused blocks will be removed
      </P
></LI
></UL
> 
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>Boolean</I
></TT
> - false on false, otherwise true 
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.setRoot"
></A
><H2
>IntegratedTemplate::setRoot</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5819"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::setRoot</B
></CODE
> (string $root)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Sets the file root. The file root gets prefixed to all filenames passed 
    to the object. 
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$root</I
></TT
> - root directory for the templates
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$removeUnknownVariables</I
></TT
> - when true
       not assigned placeholders will be deleted
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$removeEmptyBlocks</I
></TT
> - when true
       unused blocks will be removed
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.templates.it.show"
></A
><H2
>IntegratedTemplate::show</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN5839"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>IntegratedTemplate::show</B
></CODE
> ([string $block])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Print a certain block with all replacements done.
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$block</I
></TT
> - when not set the whole content 
       will be printed.
      </P
></LI
></UL
> 
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="packages.templates.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="packages.templates.itx.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>HTML Templates</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="packages.templates.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><B
CLASS="classname"
>IntegratedTemplateExtension</B
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>