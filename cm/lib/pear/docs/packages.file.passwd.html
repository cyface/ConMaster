<HTML
><HEAD
><TITLE
>File_Passwd</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.73
"><LINK
REL="HOME"
TITLE="PEAR Manual"
HREF="index.html"><LINK
REL="UP"
TITLE="Filesystem related"
HREF="packages.file.html"><LINK
REL="PREVIOUS"
TITLE="File_Find"
HREF="packages.file.find.html"><LINK
REL="NEXT"
TITLE="File_SearchReplace"
HREF="packages.file.searchreplace.html"><META
HTTP-EQUIV="Content-type"
CONTENT="text/html; charset=ISO-8859-1"></HEAD
><BODY
CLASS="refentry"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>PEAR Manual</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="packages.file.find.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="packages.file.searchreplace.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="packages.file.passwd"
><B
CLASS="classname"
>File_Passwd</B
></A
></H1
><DIV
CLASS="refnamediv"
><A
NAME="AEN3823"
></A
><B
CLASS="classname"
>File_Passwd</B
>&nbsp;--&nbsp;
    provides functions for manage passwd-style files
   </DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.file"
></A
><H2
>passwd-style files</H2
><P
>&#13;    <B
CLASS="command"
>passwd</B
>-style means, the file has a
    format like this:
    <TABLE
WIDTH="100%"
CELLSPACING="0"
CELLPADDING="0"
BORDER="0"
BGCOLOR="#EEEEEE"
><TR
><TD
><PRE
CLASS="programlisting"
>user:password</PRE
></TD
></TR
></TABLE
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.tempfile"
></A
><H2
>The temporary file</H2
><P
>&#13;    <B
CLASS="classname"
>File_Passwd</B
> reads the existing password
    file, copies the content into a temporary file. All changes,
    you do with the provided functions only influence this copy.
    First, when you call <A
HREF="packages.file.passwd.html#packages.file.passwd.close"
>&#13;    <B
CLASS="function"
>close()</B
></A
> the copy will renamed to the
    password file.
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.passwd"
></A
><H2
>File_Passwd::File_Passwd</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3840"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>File_Passwd::File_Passwd</B
></CODE
> ([string $file
        boolean $lock
        string $lockfile]])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Requires the name of the password file. This functions opens the file and read it.
    Changes to this file will written first in the lock file, so it is still possible
    to access the passwd file by another programs. The lock parameter controls the
    locking of the lockfile, not of the passwd file!
    (Swapping $lock and $lockfile would breaks bc to v1.3 and smaller).
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$file</I
></TT
> - password file to read
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$lock</I
></TT
> - if true, the temporary file
       will be locked
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$lockfile</I
></TT
> - name of the temporary
       password file
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.adduser"
></A
><H2
>File_Passwd::addUser</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3864"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>mixed
     <B
CLASS="function"
>File_Passwd::addUser</B
></CODE
> ([string $user
        string $pass
        string $cvsuser])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Adds a user to the file
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$user</I
></TT
> - the user name
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$pass</I
></TT
> - the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>&#13;       uncrypted</I
></SPAN
> password
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$cvsuser</I
></TT
> - when editing a cvs passwd
       file, you can set the cvs user name
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>mixed</I
></TT
> - when the user already exists,
       you get a <A
HREF="class.pear-error.html"
><B
CLASS="classname"
>PEAR_Error</B
></A
>
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.moduser"
></A
><H2
>File_Passwd::modUser</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3894"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>mixed
     <B
CLASS="function"
>File_Passwd::modUser</B
></CODE
> ([string $user
        string $pass
        string $cvsuser])</CODE
></P
><P
></P
></DIV
><P
>&#13;    Modify a user in the file
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$user</I
></TT
> - the user name
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$pass</I
></TT
> - the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>&#13;       uncrypted</I
></SPAN
> password
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$cvsuser</I
></TT
> - when editing a cvs passwd
       file, you can set the cvs user name
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>mixed</I
></TT
> - when user doesn't exists,
       you get a <A
HREF="class.pear-error.html"
><B
CLASS="classname"
>PEAR_Error</B
></A
>
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.deluser"
></A
><H2
>File_Passwd::delUser</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3924"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>mixed
     <B
CLASS="function"
>File_Passwd::delUser</B
></CODE
> (string $user)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Deletes a user in the file
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$user</I
></TT
> - the user name
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>mixed</I
></TT
> - when user doesn't exists,
       you get a <A
HREF="class.pear-error.html"
><B
CLASS="classname"
>PEAR_Error</B
></A
>
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.verify"
></A
><H2
>File_Passwd::verifyPassword</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3944"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>boolean
     <B
CLASS="function"
>File_Passwd::verifyPassword</B
></CODE
> (string $user
        string $pass)</CODE
></P
><P
></P
></DIV
><P
>&#13;    Verifies a user's password
   </P
><P
>&#13;    Parameter
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$user</I
></TT
> - the user name
      </P
></LI
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>$pass</I
></TT
> - the <SPAN
CLASS="emphasis"
><I
CLASS="emphasis"
>&#13;       uncrypted</I
></SPAN
> password
      </P
></LI
></UL
>
   </P
><P
>&#13;    Returns
    <P
></P
><UL
><LI
><P
>&#13;       <TT
CLASS="parameter"
><I
>boolean</I
></TT
> - true, if password is ok
      </P
></LI
></UL
>
   </P
></DIV
><DIV
CLASS="refsect1"
><A
NAME="packages.file.passwd.close"
></A
><H2
>File_Passwd::close</H2
><DIV
CLASS="funcsynopsis"
><A
NAME="AEN3968"
></A
><P
></P
><P
><CODE
><CODE
CLASS="FUNCDEF"
>void
     <B
CLASS="function"
>File_Passwd::close</B
></CODE
> ()</CODE
></P
><P
></P
></DIV
><P
>&#13;    Writes changes to passwd file and unlocks it.
   </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="packages.file.find.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="packages.file.searchreplace.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><B
CLASS="classname"
>File_Find</B
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="packages.file.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><B
CLASS="classname"
>File_SearchReplace</B
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>